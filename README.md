![image](https://github.com/hig0ni/shoppingmall/assets/111436454/9696d55d-7978-460b-a244-9d3222186672)


# THE Camping - Camping Shopping Mall ğŸ•ï¸


ğŸ’¡ ìº í•‘ìš©í’ˆì„ íŒë§¤í•˜ëŠ” ì‡¼í•‘ëª° ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë©°, PC & Mobile ëª¨ë‘ í˜¸í™˜ë˜ëŠ” ë°˜ì‘í˜• ì›¹ì…ë‹ˆë‹¤.

## Tech Stack ğŸ› ï¸
FrontEnd: Nextjs

BackEnd: Nestjs

DataBase: MySQL

+) GraphQL, TypeScript

## ğŸ’¡ ìº í•‘ìš©í’ˆ ì‡¼í•‘ëª° Why?

í•™ìŠµí•˜ë©´ì„œ ë°°ìš´ ë¡œê·¸ì¸, íšŒì›ê°€ì…, ê²°ì œ, ì´ë¯¸ì§€ ì—…ë¡œë“œ ë“± ë‹¤ì–‘í•œ APIë¥¼ ì ìš©í•´ ë³¼ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ì—¬ì„œ ì„ íƒ

## **ğŸ“¢ Main API**

# User

### 1ï¸âƒ£ íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ
![1](https://github.com/hig0ni/shoppingmall/assets/111436454/738f82e8-67d3-4a79-a2f8-5d4803ede668)
![2](https://github.com/hig0ni/shoppingmall/assets/111436454/dc6114d4-8602-432a-afb7-de2f566a1b26)
![3](https://github.com/hig0ni/shoppingmall/assets/111436454/8935381b-7534-463c-90ca-7c9305f1c660)

- JWT ì´ìš©(AccessToken, RefreshToken)
- ë³´ì•ˆì„ ìœ„í•´ AccessTokenì˜ ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ ì„¤ì • â‡’ RefreshTokenì´ ìˆì–´ì„œ ê´œì°®ìŒ!
- í•­ìƒ í˜¸ì¶œë˜ëŠ” headerì— RefreshTokenì„ ì´ìš©í•´ AccessToken ì¬ë°œê¸‰ ë°›ëŠ” API í˜¸ì¶œ
- ë”°ë¼ì„œ ì†Œì…œë¡œê·¸ì¸ì‹œ AccessTokenì„ ë°œê¸‰ ë°›ì§€ ì•Šì•„ë„ RefreshTokenì„ ì´ìš©í•´ AccessTokenì„ ë°œê¸‰ ë°›ì„ ìˆ˜ ìˆë‹¤.

- AccessTokenì€ recoilì„ ì‚¬ìš©í•´ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  RefreshTokenì€ ì¿ í‚¤ì— ì €ì¥

![4](https://github.com/hig0ni/shoppingmall/assets/111436454/c0999e3d-428d-4e58-9afd-0645b442123c)

- ë¡œê·¸ì•„ì›ƒ ì‹œ RefreshTokenì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¿ í‚¤ ì‚­ì œ í•˜ë˜ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ì˜€ìœ¼ë‚˜, httpOnly ì„¤ì •ìœ¼ë¡œ ë°”ê¾¸ê³  ë‚œ í›„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚­ì œê°€ ë¶ˆê°€ëŠ¥í•´ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ ì„œë²„ì—ì„œ ì¿ í‚¤ ì‚­ì œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬

### 2ï¸âƒ£ ì†Œì…œë¡œê·¸ì¸

- passport ì´ìš©(Google, Kakao, Naver)
- ê° ì†Œì…œë¡œê·¸ì¸ ë§ˆë‹¤ ê°™ì€ ì´ë©”ì¼ì„ ì“°ëŠ” ê²½ìš°ê°€ ìˆìœ¼ë¯€ë¡œ isAuthë¼ëŠ” columnì„ ì¶”ê°€í•´ êµ¬ë¶„í•¨

![5](https://github.com/hig0ni/shoppingmall/assets/111436454/4309dff2-ca1a-44c3-8261-74fe3e964352)

### 3ï¸âƒ£ í”„ë¡œí•„ ìˆ˜ì •(ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •, ë‹‰ë„¤ì„ ìˆ˜ì •, íšŒì›íƒˆí‡´)
![6](https://github.com/hig0ni/shoppingmall/assets/111436454/72a0c027-ae89-403d-8760-7238baf88823)
![7](https://github.com/hig0ni/shoppingmall/assets/111436454/18b30500-c191-40df-a824-a0d20ea90ca6)
![8](https://github.com/hig0ni/shoppingmall/assets/111436454/8397a3a3-d409-40b3-b86e-986dda60c905)

- ì†Œì…œë¡œê·¸ì¸ì€ ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •í•  ìˆ˜ ì—†ê²Œ!
- ì†Œì…œë¡œê·¸ì¸ì˜ ë‹‰ë„¤ì„ì€ ì´ë¦„ ë’¤ì— random numberë¥¼ ì¶”ê°€í•˜ê³  í›„ì— ë³€ê²½í•˜ë„ë¡ ì„¤ê³„ ex) í•˜ì´ê³ ë‹ˆ#567477
![33](https://github.com/hig0ni/shoppingmall/assets/111436454/937b5275-1885-43bc-a198-e1305e38f814)
![34](https://github.com/hig0ni/shoppingmall/assets/111436454/7bd92e0a-c76d-4be5-8ae6-d4f221dffce9)

# Product

### 1ï¸âƒ£ ìƒí’ˆ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°

- ì²˜ìŒ ìƒí’ˆ í˜ì´ì§€(/products)ì— ë“¤ì–´ê°€ë©´ ì „ì²´ ìƒí’ˆì˜ ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.

![9](https://github.com/hig0ni/shoppingmall/assets/111436454/0e49acae-8839-4ebb-9ebd-c17cbb3b78be)

- ì´í›„ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ì „ì²´ ìƒí’ˆ ì¤‘ì—ì„œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë§Œ í•„í„°ë§í•´ì„œ ë³´ì—¬ì¤€ë‹¤.

![10](https://github.com/hig0ni/shoppingmall/assets/111436454/89b3f1bb-2ea3-4dad-bb68-7e4b0df4efed)

### 2ï¸âƒ£ ìƒí’ˆ ê²€ìƒ‰

- ê²€ìƒ‰ì°½ì— ë‹¨ì–´ ê²€ìƒ‰ ì‹œ í•´ë‹¹ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ìƒí’ˆì„ ëª¨ë‘ ê°€ì ¸ì™€ì„œ ê·¸ ëª©ë¡ì„ ë³´ì—¬ì¤€ë‹¤.

![11](https://github.com/hig0ni/shoppingmall/assets/111436454/7e14d32f-a9d6-44af-a16b-6b7306482f38)

### 3ï¸âƒ£ ìƒí’ˆ ìƒì„¸ë³´ê¸°

![12](https://github.com/hig0ni/shoppingmall/assets/111436454/87861bd2-b9a4-446d-bdd0-119764c7d0bf)

- ìƒì„¸ë³´ê¸°ëŠ” ì‚¬ì§„, ìƒí’ˆëª…, ê°€ê²©, ìƒí’ˆ ì„¤ëª…ìœ¼ë¡œ ë˜ì–´ ìˆê³ , ì‚¬ì§„ì€ ìƒí’ˆ ë“±ë¡ ì‹œ gcpì— ì €ì¥í•œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

### 4ï¸âƒ£ ìƒí’ˆ ë“±ë¡

![13](https://github.com/hig0ni/shoppingmall/assets/111436454/647263c4-05fc-479e-9bf2-dc3c1c0d15e7)

- ì´ë¯¸ì§€ëŠ” gcpì— ì €ì¥í•´ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì„ urlì„ ê°€ì ¸ì˜¨ë‹¤.
- ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆëª…, ìƒí’ˆ ì„¤ëª…, ê°€ê²©, ì¹´í…Œê³ ë¦¬, urlì„ ì €ì¥í•œë‹¤.

### 5ï¸âƒ£ ìƒí’ˆ ìˆ˜ì •

ì§„í–‰ì¤‘

### 6ï¸âƒ£ ìƒí’ˆ ì‚­ì œ

ì§„í–‰ì¤‘

# Point

### 1ï¸âƒ£ í¬ì¸íŠ¸ ì¶©ì „

![14](https://github.com/hig0ni/shoppingmall/assets/111436454/9820f556-16d4-48a5-a779-c0ff7428b087)
![15](https://github.com/hig0ni/shoppingmall/assets/111436454/48ffaf09-d131-4067-a08d-9c5c3cb7629b)

- í¬íŠ¸ì› ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ KaKaoPayë¡œ ê²°ì œí•´ì„œ í¬ì¸íŠ¸ ì¶©ì „
- ì¶©ì „í•  ê¸ˆì•¡ì„ ì„ íƒí•œ í›„ KaKaoPay ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²°ì œì°½ìœ¼ë¡œ ì´ë™í•˜ë©° ì„±ê³µ ì‹œ ì œê³µ ë°›ëŠ” impUidì™€ amountë¥¼ ì´ìš©í•´ì„œ DBì— ì €ì¥
![20](https://github.com/hig0ni/shoppingmall/assets/111436454/99cb33a6-c097-41b1-95cb-4dd1a0029ee2)

### 2ï¸âƒ£ ì¶©ì „ ë‚´ì—­ ì¡°íšŒ
![16](https://github.com/hig0ni/shoppingmall/assets/111436454/0f86f02e-51a2-4fae-a919-e2a752b0367e)


- ì¶©ì „ ë‚´ì—­ì€ ì•„ì§ í™˜ë¶ˆ í•˜ì§€ ì•Šì€ ì¶©ì „ ëª©ë¡ì„ ë³´ì—¬ì¤€ë‹¤.
- ë”°ë¼ì„œ serverì—ì„œ dataë¥¼ ë³´ë‚´ì¤„ ë•Œ ì•„ì§ cancleë˜ì§€ ì•Šì€ ëª©ë¡ë§Œ ê°€ì ¸ì™€ì•¼í•¨
- ë¡œì§ì€ 1. statusê°€ CANCELì¸ `impuid` ì¡°íšŒ 2. typeormì˜ â€˜notâ€™, â€˜inâ€™ì„ ì´ìš©í•´ì„œ 'CANCEL' ìƒíƒœì˜Â `impUid`ë¥¼ ì œì™¸í•œ ê²°ê³¼ë¥¼ return í•œë‹¤.

### 3ï¸âƒ£ í¬ì¸íŠ¸ í™˜ë¶ˆ
![17](https://github.com/hig0ni/shoppingmall/assets/111436454/64d4f84d-e615-46a8-95ad-5069b42bc663)
![18](https://github.com/hig0ni/shoppingmall/assets/111436454/a928811a-7f36-414c-bb9d-e4555d5f8269)

- ì¶©ì „ ë‚´ì—­ì—ì„œ í™˜ë¶ˆí•˜ê³  ì‹¶ì€ ë‚´ì—­ì„ ì„ íƒí•˜ë©´ ì•Œë¦¼ì°½ì´ ëœ¨ê³  í™•ì¸ì„ ëˆ„ë¥´ë©´ í™˜ë¶ˆ apië¥¼ ìš”ì²­í•œë‹¤.
- ë¡œì§ì€ 1. ê²°ì œë‚´ì—­ ì¡°íšŒ 2. ì´ë¯¸ ì·¨ì†Œëë˜ pointTransactions ì¸ì§€ ê²€ì¦ 3. í¬ì¸íŠ¸ê°€ ì·¨ì†Œí•˜ê¸°ì— ì¶©ë¶„íˆ ìˆëŠ”ì§€ ê²€ì¦
- ëª¨ë‘ í†µê³¼í•˜ë©´ iamportë¡œ ì·¨ì†Œ ìš”ì²­ì„ ë³´ë‚´ê³  DBì— amountëŠ” -amount, statusëŠ” CANCELì¸ ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤.

![19](https://github.com/hig0ni/shoppingmall/assets/111436454/f85db57a-d25b-4647-9402-bbd09dcdf8f9)


+) ì´í›„ í•´ì•¼ í•  ê²ƒ

ìƒí’ˆ ìˆ˜ì •,

ìƒí’ˆ ì‚­ì œ,

í¬ì¸íŠ¸ë¡œ ìƒí’ˆ ê²°ì œ,

ìƒí’ˆ ê°œìˆ˜ì— ë”°ë¼ ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°(ex: 1/5)

